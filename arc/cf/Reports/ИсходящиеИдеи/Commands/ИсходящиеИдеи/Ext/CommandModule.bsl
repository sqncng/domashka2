
#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Если ТипЗнч(ПараметрКоманды) = Тип("СправочникСсылка.ТехническиеПроекты") Тогда
		
		РеквизитыТехническогоПроекта = РеквизитыТехническогоПроекта(ПараметрКоманды);
		
		СтруктураОтбора = Новый Структура;
		СтруктураОтбора.Вставить("ОснованиеИдеи", ПараметрКоманды);
		СтруктураОтбора.Вставить("Проект", РеквизитыТехническогоПроекта.Владелец);
		
	Иначе
		
		Проект = ВладелецОбъекта(ПараметрКоманды);
		
		СтруктураОтбора = Новый Структура;
		СтруктураОтбора.Вставить("ОснованиеИдеи", ПараметрКоманды);
		СтруктураОтбора.Вставить("Проект", Проект);
		
	КонецЕсли;
	
	ПараметрыФормы = Новый Структура("КлючВарианта, Отбор, СформироватьПриОткрытии, ВидимостьКомандВариантовОтчетов", 
		"ИсходящиеИдеиКонтекстный",
		СтруктураОтбора, 
		Истина,
		Ложь);
		
	ОткрытьФорму(
		"Отчет.ИсходящиеИдеи.Форма",
		ПараметрыФормы, ,
		Истина,
		ПараметрыВыполненияКоманды.Окно);
		
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Функция РеквизитыТехническогоПроекта(ТехническийПроект)
	
	Возврат ОбщегоНазначения.ЗначенияРеквизитовОбъекта(ТехническийПроект, "Владелец, Версия");
	
КонецФункции

&НаСервере
Функция ВладелецОбъекта(Объект)
	
	Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект, "Владелец");
	
КонецФункции

#КонецОбласти
