#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Инструкция = "";
	Если ЗначениеЗаполнено(Параметры.Инструкция) Тогда
		Инструкция = ОбщегоНазначения.ЗначениеИзСтрокиXML(Параметры.Инструкция);
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(Инструкция) Тогда
		Инструкция = ПатчиСлужебный.ИнструкцияПроверкиПатча();
		Инструкция = Новый ФорматированнаяСтрока(Инструкция);
	КонецЕсли;
	
	ИнструкцияПроверки.УстановитьФорматированнуюСтроку(Инструкция);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура Применить(Команда)
	Закрыть(СтрокаИзФорматированнойСтроки());
КонецПроцедуры

&НаКлиенте
Процедура УстановитьПоУмолчанию(Команда)
	УстановитьПоУмолчаниюНаСервере();
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УстановитьПоУмолчаниюНаСервере()
	Инструкция = ПатчиСлужебный.ИнструкцияПроверкиПатча();
	ИнструкцияПроверки.УстановитьФорматированнуюСтроку(Новый ФорматированнаяСтрока(Инструкция));
КонецПроцедуры

&НаСервере
Функция СтрокаИзФорматированнойСтроки()
	СтандартнаяИнструкция = Новый ФорматированнаяСтрока(ПатчиСлужебный.ИнструкцияПроверкиПатча());
	ТекущаяИнструкция = ИнструкцияПроверки.ПолучитьФорматированнуюСтроку();
	Если ТекущаяИнструкция = СтандартнаяИнструкция Тогда
		Возврат "";
	Иначе
		Возврат ОбщегоНазначения.ЗначениеВСтрокуXML(ИнструкцияПроверки.ПолучитьФорматированнуюСтроку())
	КонецЕсли;
КонецФункции

#КонецОбласти